jQuery(document).ready(function(){PJ_STORAGE.theme_init_counter=0;pj_init_actions()});function pj_init_actions(){if(PJ_STORAGE.vc_edit_mode&&jQuery(".vc_empty-placeholder").length==0&&PJ_STORAGE.theme_init_counter++<30){setTimeout(pj_init_actions,200);return}pj_ready_actions();pj_resize_actions();pj_scroll_actions();jQuery(window).resize(function(){pj_resize_actions()});jQuery(window).scroll(function(){pj_scroll_actions()})}function pj_ready_actions(){document.documentElement.className=document.documentElement.className.replace(/\bno-js\b/,"js");if(document.documentElement.className.indexOf(PJ_STORAGE.site_scheme)==-1){document.documentElement.className+=" "+PJ_STORAGE.site_scheme}if(jQuery(".pj_tabs:not(.inited)").length>0&&jQuery.ui&&jQuery.ui.tabs){jQuery(".pj_tabs:not(.inited)").each(function(){var c=jQuery(this).data("active");if(isNaN(c)){c=0;var b=jQuery(this).find('> ul > li[data-active="true"]').eq(0);if(b.length>0){c=b.index();if(isNaN(c)||c<0){c=0}}}else{c=Math.max(0,c)}jQuery(this).addClass("inited").tabs({active:c,show:{effect:"fadeIn",duration:300},hide:{effect:"fadeOut",duration:300},create:function(d,e){if(e.panel.length>0){jQuery(document).trigger("action.init_hidden_elements",[e.panel])}},activate:function(d,e){if(e.newPanel.length>0){jQuery(document).trigger("action.init_hidden_elements",[e.newPanel])}}})})}jQuery(".pj_tabs_ajax").on("tabsbeforeactivate",function(b,c){if(c.newPanel.data("need-content")){pj_tabs_ajax_content_loader(c.newPanel,1,c.oldPanel)}});jQuery(".pj_tabs_ajax").on("click",".nav-links a",function(f){var b=jQuery(this).parents(".pj_tabs_content");var d=1;var c=jQuery(this).attr("href");var g=-1;if((g=c.lastIndexOf("/page/"))!=-1){d=Number(c.substr(g+6).replace("/",""));if(!isNaN(d)){d=Math.max(1,d)}}pj_tabs_ajax_content_loader(b,d);f.preventDefault();return false});if(PJ_STORAGE.menu_cache){pj_prepare_cached_menus()}if(jQuery(".menu_side_inner").length>0&&jQuery("#toc_menu").length>0){jQuery("#toc_menu").appendTo(".menu_side_inner")}jQuery(".menu_mobile .menu-item-has-children > a, body:not(.woocommerce) .widget_area:not(.footer_wrap) .widget_product_categories ul.product-categories .has_children > a").prepend('<span class="open_child_menu"></span>');jQuery(".menu_mobile_button").on("click",function(b){jQuery(".menu_mobile_overlay").fadeIn();jQuery(".menu_mobile").addClass("opened");b.preventDefault();return false});jQuery(".menu_mobile_close, .menu_mobile_overlay").on("click",function(b){jQuery(".menu_mobile_overlay").fadeOut();jQuery(".menu_mobile").removeClass("opened");b.preventDefault();return false});jQuery(".menu_mobile, body:not(.woocommerce) .widget_area:not(.footer_wrap) .widget_product_categories").on("click","li a,li a .open_child_menu, ul.product-categories.plain li a .open_child_menu",function(c){var b=jQuery(this).hasClass("open_child_menu")?jQuery(this).parent():jQuery(this);if(b.parent().hasClass("menu-item-has-children")||b.parent().hasClass("has_children")){if(b.attr("href")=="#"||jQuery(this).hasClass("open_child_menu")){if(b.siblings("ul:visible").length>0){b.siblings("ul").slideUp().parent().removeClass("opened")}else{jQuery(this).parents("li").siblings("li").find("ul:visible").slideUp().parent().removeClass("opened");b.siblings("ul").slideDown().parent().addClass("opened")}}}if(jQuery(this).hasClass("open_child_menu")||b.attr("href")=="#"){c.preventDefault();return false}});pj_init_sfmenu("ul#menu_main");if(jQuery("ul#menu_main").hasClass("inited")){jQuery(".menu_main_nav_area").addClass("menu_show")}PJ_STORAGE.top_panel_height=0;if(jQuery(".search_wrap:not(.inited)").length>0){jQuery(".search_wrap:not(.inited)").each(function(){var b=null;jQuery(this).addClass("inited");jQuery(this).find(".search_field").on("keyup",function(g){if(jQuery(this).parents(".top_panel_navi").length>0){var c=jQuery(this);var f=c.parents(".search_wrap");if(g.keyCode==27){a(f);g.preventDefault();return}if(!f.hasClass("search_style_fullscreen")){if(c.val()!=""){if(!c.siblings(".search_submit").hasClass("icon-search")){c.siblings(".search_submit").removeClass("icon-cancel").addClass("icon-search")}}else{if(!c.siblings(".search_submit").hasClass("icon-cancel")){c.siblings(".search_submit").removeClass("icon-search").addClass("icon-cancel")}}}if(f.hasClass("search_ajax")){var d=c.val();if(b){clearTimeout(b);b=null}if(d.length>=4){b=setTimeout(function(){jQuery.post(PJ_STORAGE.ajax_url,{action:"ajax_search",nonce:PJ_STORAGE.ajax_nonce,text:d}).done(function(h){clearTimeout(b);b=null;var j={};try{j=JSON.parse(h)}catch(i){j={error:PJ_STORAGE.search_error};console.log(h)}var k=j.error===""?j.data:j.error;c.parents(".search_ajax").find(".search_results_content").empty().append(j.data);c.parents(".search_ajax").find(".search_results").fadeIn()})},500)}}}});jQuery(this).find(".search_submit").on("click",function(d){var c=jQuery(this).parents(".search_wrap");if(c.find(".search_field").val()!=""&&(jQuery(this).parents(".top_panel_navi").length==0||c.hasClass("search_opened"))){c.find("form").get(0).submit()}else{if(jQuery(this).parents(".top_panel_navi").length>0){if(c.hasClass("search_opened")){a(c)}else{c.addClass("search_opened");if(c.find(".search_field").val()==""&&!c.hasClass("search_style_fullscreen")){c.find(".search_submit").removeClass("icon-search").addClass("icon-cancel")}setTimeout(function(){c.find(".search_field").get(0).focus()},500)}}}d.preventDefault();return false});jQuery(this).find(".search_close").on("click",function(c){a(jQuery(this).parents(".search_wrap"));c.preventDefault();return false});jQuery(this).find(".search_results_close").on("click",function(c){jQuery(this).parent().fadeOut();c.preventDefault();return false});jQuery(this).on("click",".search_more",function(c){if(jQuery(this).parents(".search_wrap").find(".search_field").val()!=""){jQuery(this).parents(".search_wrap").find("form").get(0).submit()}c.preventDefault();return false})})}function a(b){if(b.parents(".top_panel_navi").length>0){b.removeClass("search_opened");if(b.find(".search_submit").hasClass("icon-cancel")){b.find(".search_submit").removeClass("icon-cancel").addClass("icon-search")}b.find(".search_results").fadeOut()}}jQuery(".widget ul > li").each(function(){if(jQuery(this).find("ul").length>0){jQuery(this).addClass("has_children")}});jQuery(".widget_archive a").each(function(){var b=jQuery(this).html().split(" ");if(b.length>1){b[b.length-1]="<span>"+b[b.length-1]+"</span>";jQuery(this).html(b.join(" "))}});jQuery("select:visible:not(.esg-sorting-select)").wrap('<div class="select_container"></div>');jQuery("form#commentform").submit(function(c){var b=pj_comments_validate(jQuery(this));if(!b){c.preventDefault()}return b});jQuery("form").on("keypress",".error_field",function(){if(jQuery(this).val()!=""){jQuery(this).removeClass("error_field")}});jQuery(".woocommerce,.woocommerce-page").on("click",".pj_shop_mode_buttons a",function(b){var c=jQuery(this).hasClass("woocommerce_thumbs")?"thumbs":"list";jQuery.cookie("pj_shop_mode",c,{expires:365,path:"/"});jQuery(this).siblings("input").val(c).parents("form").get(0).submit();b.preventDefault();return false});jQuery(".woocommerce div.quantity,.woocommerce-page div.quantity").append('<span class="q_inc"></span><span class="q_dec"></span>');jQuery(".woocommerce div.quantity").on("click",">span",function(c){var b=jQuery(this).siblings("input");if(jQuery(this).hasClass("q_inc")){b.val(Math.max(0,parseInt(b.val()),0)+1)}else{b.val(Math.max(1,Math.max(0,parseInt(b.val()),0)-1))}c.preventDefault();return false});jQuery(".single-product .woocommerce-tabs").wrap('<div class="trx-stretch-width"></div>');jQuery(".trx-stretch-width").wrap('<div class="trx-stretch-width-wrap scheme_light"></div>');jQuery(".trx-stretch-width").after('<div class="trx-stretch-width-original"></div>');pj_stretch_width();jQuery(".nav-links-more a").on("click",function(f){if(PJ_STORAGE.load_more_link_busy){return}PJ_STORAGE.load_more_link_busy=true;var c=jQuery(this);var d=Number(c.data("page"));var b=Number(c.data("max-page"));if(d>=b){c.parent().hide();return}c.parent().addClass("loading");jQuery.get(location.href,{page:d+1}).done(function(g){var e=jQuery(".content > .posts_container").eq(0);var h=jQuery(g).find(".content > .posts_container");if(h.length>0&&e.length>0){e.append(h.html());c.data("page",d+1).parent().removeClass("loading");PJ_STORAGE.init_all_mediaelements=true;jQuery(document).trigger("action.init_shortcodes",[e]);jQuery(document).trigger("action.init_hidden_elements",[e])}if(d+1>=b){c.parent().hide()}else{PJ_STORAGE.load_more_link_busy=false}jQuery(window).trigger("scroll")});f.preventDefault();return false});jQuery(document).on("action.scroll_actions",function(d){if(PJ_STORAGE.load_more_link_busy){return}var b=jQuery(".content > .posts_container").eq(0);var c=jQuery(".nav-links-infinite");if(c.length==0){return}if(b.offset().top+b.height()<jQuery(window).scrollTop()+jQuery(window).height()){c.find("a").trigger("click")}});jQuery(document).trigger("action.ready");jQuery(document).on("action.init_hidden_elements",pj_init_post_formats);jQuery(document).trigger("action.init_hidden_elements",[jQuery("body").eq(0)])}function pj_scroll_actions(){var b=jQuery(window).scrollTop();var a=Math.max(0,jQuery("#wpadminbar").height());if(PJ_STORAGE.top_panel_height==0){PJ_STORAGE.top_panel_height=jQuery(".top_panel_navi").outerHeight()}jQuery(document).trigger("action.scroll_actions");if(!jQuery("body").hasClass("mobile_layout")&&!jQuery("body").hasClass("menu_style_side")){var c=0;if(b<=c+PJ_STORAGE.top_panel_height){if(jQuery("body").hasClass("top_panel_fixed")){jQuery("body").removeClass("top_panel_fixed");jQuery(".top_panel_navi").removeClass("state_fixed")}}else{if(b>c+PJ_STORAGE.top_panel_height){if(!jQuery("body").hasClass("top_panel_fixed")&&jQuery(document).height()>jQuery(window).height()*1.5){jQuery(".top_panel_fixed_wrap").height(PJ_STORAGE.top_panel_height);jQuery(".top_panel_navi").css("marginTop","-150px").animate({marginTop:0},500);jQuery(".top_panel_navi").addClass("state_fixed");jQuery("body").addClass("top_panel_fixed")}}}}jQuery('[data-animation^="animated"]:not(.animated)').each(function(){if(jQuery(this).offset().top<jQuery(window).scrollTop()+jQuery(window).height()){jQuery(this).addClass(jQuery(this).data("animation"))}})}function pj_resize_actions(){pj_check_layout();pj_stretch_width();pj_vc_row_fullwidth_to_boxed()}function pj_check_layout(){if(jQuery("body").hasClass("no_layout")){jQuery("body").removeClass("no_layout")}var a=window.innerWidth;if(a==undefined){a=jQuery(window).width()+(jQuery(window).height()<jQuery(document).height()||jQuery(window).scrollTop()>0?16:0)}if(PJ_STORAGE.mobile_layout_width>=a){if(!jQuery("body").hasClass("mobile_layout")){jQuery("body").removeClass("top_panel_fixed desktop_layout").addClass("mobile_layout");jQuery(".top_panel_navi").removeClass("state_fixed")}}else{if(!jQuery("body").hasClass("desktop_layout")){jQuery("body").removeClass("mobile_layout").addClass("desktop_layout");jQuery(".menu_mobile").removeClass("opened");jQuery(".menu_mobile_overlay").hide()}}var c=jQuery("body:not(.woocommerce) .widget_area:not(.footer_wrap) .widget_product_categories ul.product-categories");var b=c.parents(".widget_area");if(b.length>0&&c.length>0){if(b.width()==b.parents(".content_wrap").width()){if(c.hasClass("inited")){c.removeClass("inited").addClass("plain").superfish("destroy");c.find("ul.animated").removeClass("animated").addClass("no_animated")}}else{if(!c.hasClass("inited")){c.removeClass("plain").addClass("inited");c.find("ul.no_animated").removeClass("no_animated").addClass("animated");pj_init_sfmenu("body:not(.woocommerce) .widget_area:not(.footer_wrap) .widget_product_categories ul.product-categories")}}}}function pj_stretch_width(){jQuery(".trx-stretch-width").each(function(){var j=jQuery(this);var c=j.parents(".page_wrap");var i=0;if(c.length==0){c=jQuery(window)}else{i=c.offset().left}var h=j.next(".trx-stretch-width-original");var f=parseInt(j.css("margin-left"),10);var d=parseInt(j.css("margin-right"),10);var e=i-h.offset().left-f;var a=c.width();if(!j.hasClass("inited")){j.addClass("inited invisible");j.css({position:"relative","box-sizing":"border-box"})}j.css({left:e,width:c.width()});if(!j.hasClass("trx-stretch-content")){var g=Math.max(0,-1*e);var b=Math.max(0,a-g-h.width()+f+d);j.css({"padding-left":g+"px","padding-right":b+"px"})}j.removeClass("invisible")})}function pj_vc_row_fullwidth_to_boxed(){if(jQuery("body").hasClass("body_style_boxed")){var b=jQuery("body").width();var d=jQuery(".page_wrap").width();var c=jQuery(".page_content_wrap  .content_wrap").width();var a=(d-c)/2;if(b>d){jQuery('.vc_row[data-vc-full-width="true"]').each(function(){var e=parseInt(jQuery(this).css("marginLeft"),0);jQuery(this).css({width:d,left:-a-e,"padding-left":a+e,"padding-right":a+e});if(jQuery(this).attr("data-vc-stretch-content")){jQuery(this).css({"padding-left":0,"padding-right":0})}})}}}function pj_fix_sidebar(){var h=jQuery(".sidebar");if(h.length>0){if(jQuery(".page_content_wrap .content_wrap .content").css("float")=="none"){if(h.css("position")=="fixed"){h.css({"float":h.hasClass("right")?"right":"left",position:"static"})}}else{var e=h.outerHeight();var b=h.siblings(".content").outerHeight();var g=jQuery(window).scrollTop();var l=jQuery(".top_panel").length>0?jQuery(".top_panel").outerHeight():0;var f=jQuery(".widgets_above_page_wrap").length>0?jQuery(".widgets_above_page_wrap").height():0;var c=parseInt(jQuery(".page_content_wrap").css("paddingTop"),0);if(isNaN(c)){c=0}if(e<b&&(e>=jQuery(window).height()&&g+jQuery(window).height()>e+l+f+c||e<jQuery(window).height()&&g>l+f+c)){if(h.css("position")!=="fixed"){h.css({"float":"none",position:"fixed",top:Math.min(0,jQuery(window).height()-e)+"px"})}var i=jQuery(".page_content_wrap .content_wrap").position();i=i.left+Math.max(0,parseInt(jQuery(".page_content_wrap .content_wrap").css("paddingLeft")),0)+Math.max(0,parseInt(jQuery(".page_content_wrap .content_wrap").css("marginLeft")),0);if(h.hasClass("right")){h.css({right:i})}else{h.css({left:i})}var k=0;var j=jQuery(".footer_wrap").position();var a=jQuery(".widgets_below_page_wrap").position();var d=jQuery(".copyright_wrap").position();if(a){k=a.top}else{if(j){k=j.top}else{if(d){k=d.top}}}if(k>0&&g+jQuery(window).height()>k){h.css({top:Math.min(l+c,jQuery(window).height()-e-(g+jQuery(window).height()-k+30))+"px"})}else{h.css({top:Math.min(l+c,jQuery(window).height()-e)+"px"})}}else{if(h.css("position")=="fixed"){h.css({"float":h.hasClass("right")?"right":"left",position:"static",top:"auto",left:"auto",right:"auto"})}}}}}function pj_init_sfmenu(a){jQuery(a).show().each(function(){jQuery(this).addClass("inited").superfish({delay:500,animation:{opacity:"show"},animationOut:{opacity:"hide"},speed:PJ_STORAGE.menu_animation_in!="none"?500:200,speedOut:PJ_STORAGE.menu_animation_out!="none"?500:200,autoArrows:false,dropShadows:false,onBeforeShow:function(c){if(jQuery(this).parents("ul").length>1){var b=jQuery(window).width();var e=jQuery(this).parents("ul").offset().left;var f=jQuery(this).parents("ul").outerWidth();var d=jQuery(this).outerWidth();if(e+f+d>b-20&&e-d>0){jQuery(this).addClass("submenu_left")}else{jQuery(this).removeClass("submenu_left")}}if(PJ_STORAGE.menu_animation_in!="none"){jQuery(this).removeClass("animated fast "+PJ_STORAGE.menu_animation_out);jQuery(this).addClass("animated fast "+PJ_STORAGE.menu_animation_in)}},onBeforeHide:function(b){if(PJ_STORAGE.menu_animation_out!="none"){jQuery(this).removeClass("animated fast "+PJ_STORAGE.menu_animation_in);jQuery(this).addClass("animated fast "+PJ_STORAGE.menu_animation_out)}}})})}function pj_prepare_cached_menus(){var c=[jQuery("ul#menu_main"),jQuery("ul#menu_mobile")];var b=window.location.href;for(var a in c){if(c[a].length==0){continue}c[a].find("li").removeClass("current-menu-ancestor current-menu-parent current-menu-item current_page_item");c[a].find('a[href="'+b+'"]').each(function(e){var d=jQuery(this).parent();d.addClass("current-menu-item");if(d.hasClass("menu-item-object-page")){d.addClass("current_page_item")}var f=0;while((d=d.parents("li")).length>0){f++;d.addClass("current-menu-ancestor"+(f==1?" current-menu-parent":""))}})}}function pj_init_post_formats(b,a){pj_init_media_elements(a);a.find(".format-video .post_featured.with_thumb .post_video_hover:not(.inited)").addClass("inited").on("click",function(c){jQuery(this).parents(".post_featured").addClass("post_video_play").find(".post_video").html(jQuery(this).data("video"));jQuery(window).trigger("resize");c.preventDefault();return false})}function pj_init_media_elements(a){if(PJ_STORAGE.use_mediaelements&&a.find("audio,video").length>0){if(window.mejs){window.mejs.MepDefaults.enableAutosize=true;window.mejs.MediaElementDefaults.enableAutosize=true;a.find("audio,video").each(function(){if(jQuery(this).parents(".mejs-mediaelement").length==0&&(PJ_STORAGE.init_all_mediaelements||(!jQuery(this).hasClass("wp-audio-shortcode")&&!jQuery(this).hasClass("wp-video-shortcode")&&!jQuery(this).parent().hasClass("wp-playlist")))){var b=jQuery(this);var c={enableAutosize:true,videoWidth:-1,videoHeight:-1,audioWidth:"100%",audioHeight:30,success:function(e){var f,d;if("flash"===e.pluginType){f=e.attributes.autoplay&&"false"!==e.attributes.autoplay;d=e.attributes.loop&&"false"!==e.attributes.loop;f&&e.addEventListener("canplay",function(){e.play()},false);d&&e.addEventListener("ended",function(){e.play()},false)}}};jQuery(this).mediaelementplayer(c)}})}else{setTimeout(function(){pj_init_media_elements(a)},400)}}}function pj_tabs_ajax_content_loader(b,c,d){if(b.html().replace(/\s/g,"")==""){var a=d===undefined?b.height():d.height();if(isNaN(a)||a<100){a=100}b.html('<div class="pj_tab_holder" style="min-height:'+a+'px;"></div>')}else{b.find("> *").css("opacity",0)}b.data("need-content",false).addClass("pj_loading");jQuery.post(PJ_STORAGE.ajax_url,{nonce:PJ_STORAGE.ajax_nonce,action:"pj_ajax_get_posts",blog_template:b.data("blog-template"),blog_style:b.data("blog-style"),posts_per_page:b.data("posts-per-page"),cat:b.data("cat"),parent_cat:b.data("parent-cat"),page:c}).done(function(f){b.removeClass("pj_loading");var h={};try{h=JSON.parse(f)}catch(g){h={error:PJ_STORAGE.strings["ajax_error"]};console.log(f)}if(h.error!==""){b.html('<div class="pj_error">'+h.error+"</div>")}else{b.prepend(h.data).fadeIn(function(){jQuery(document).trigger("action.init_shortcodes",[b]);jQuery(document).trigger("action.init_hidden_elements",[b]);setTimeout(function(){b.find(".pj_tab_holder").remove()},1000)})}})}function pj_comments_validate(b){b.find("input").removeClass("error_field");var c={error_message_text:PJ_STORAGE.strings["error_global"],error_message_show:true,error_message_time:4000,error_message_class:"pj_messagebox pj_messagebox_style_error",error_fields_class:"error_field",exit_after_first_error:false,rules:[{field:"comment",min_length:{value:1,message:PJ_STORAGE.strings["text_empty"]},max_length:{value:PJ_STORAGE.message_maxlength,message:PJ_STORAGE.strings["text_long"]}}]};if(b.find('.comments_author input[aria-required="true"]').length>0){c.rules.push({field:"author",min_length:{value:1,message:PJ_STORAGE.strings["name_empty"]},max_length:{value:60,message:PJ_STORAGE.strings["name_long"]}})}if(b.find('.comments_email input[aria-required="true"]').length>0){c.rules.push({field:"email",min_length:{value:7,message:PJ_STORAGE.strings["email_empty"]},max_length:{value:60,message:PJ_STORAGE.strings["email_long"]},mask:{value:PJ_STORAGE.email_mask,message:PJ_STORAGE.strings["email_not_valid"]}})}var a=pj_form_validate(b,c);return !a};